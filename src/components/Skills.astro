---
import skillsData from '../../public/assets/jsons/skills.json';
const skills = skillsData;
---

<section class="skills section-common section-bg-secondary" id="skills">
    <div class="title relative text-center font-bold mb-4 md:mb-6">
        <span class="section-title text-[8vw] sm:text-[6vw] md:text-[5vw] lg:text-[3.5vw] uppercase">My Skills</span>
    </div>

    <div class="text text-center mb-8 md:mb-12 lg:mb-16 px-4">
        <span class="quote-text">The only skill that will be important in the 21st century is the skill of learning new skills.</span>
    </div>

    <!-- Skill Categories Filter -->
    <div class="skill-filter flex justify-center gap-2 sm:gap-3 lg:gap-4 flex-wrap my-6 md:my-8 lg:my-10 mx-auto px-3 sm:px-5 relative z-10">
        <button class="filter-btn active" data-filter="all">
            <span class="filter-icon">üåü</span>
            <span class="hidden sm:inline">All Skills</span>
            <span class="sm:hidden">All</span>
        </button>
        <button class="filter-btn" data-filter="devops">
            <span class="filter-icon">‚öôÔ∏è</span>
            DevOps
        </button>
        <button class="filter-btn" data-filter="cloud">
            <span class="filter-icon">‚òÅÔ∏è</span>
            Cloud
        </button>
        <button class="filter-btn" data-filter="programming">
            <span class="filter-icon">üíª</span>
            <span class="hidden sm:inline">Programming</span>
            <span class="sm:hidden">Code</span>
        </button>
        <button class="filter-btn" data-filter="tools">
            <span class="filter-icon">üõ†Ô∏è</span>
            Tools
        </button>
        <button class="filter-btn" data-filter="soft-skills">
            <span class="filter-icon">ü§ù</span>
            <span class="hidden sm:inline">Soft Skills</span>
            <span class="sm:hidden">Soft</span>
        </button>
    </div>

    <div class="skill-boxes flex flex-wrap mx-auto items-center justify-center gap-x-4 gap-y-6 sm:gap-x-6 sm:gap-y-8 lg:gap-x-8 lg:gap-y-10 relative z-10 px-4 lg:px-0 sm:max-w-md md:flex md:max-w-none" id="skill-boxes">
        {skills.map((skill) => (
        <div class="box skill-card-ready show" data-category={skill.category}>
            <div class="skill-card-inner relative z-[3]">
                <img src={`/${skill.image}`} alt={skill.title} class="skill-img" />
                <div class="topic">
                    {skill.title}
                </div>
            </div>
        </div>
        ))}
    </div>
</section>

<style>
    .filter-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border-radius: 50px;
        color: white;
        padding: 0.6rem 1rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        background: rgba(26, 15, 62, 0.4);
        border: 2px solid var(--ternary);
        transition: transform 0.25s ease, border-color 0.25s ease;
    }

    .filter-btn:hover,
    .filter-btn.active {
        transform: translateY(-2px);
        border-color: var(--primary);
        background: var(--hover);
        opacity: 0.8;
    }

    .filter-btn.active {
        background: var(--primary);
        border: 2px solid var(--primary);
        opacity: 0.9;
    }

    .filter-btn:hover .filter-icon {
        transform: scale(1.15);
    }

    .filter-icon {
        font-size: 1rem;
        display: inline-block;
        transition: transform 0.3s ease;
    }

    .box {
        display: flex;
        justify-content: center;
        border-radius: 25px;
        position: relative;
        overflow: hidden;
        margin-bottom: -20px;
        background: rgba(26, 15, 62, 0.9);
        border: 3px solid rgba(255, 255, 255, 0.15);
        transition: transform 0.35s ease, border-color 0.35s ease;
    }

    .box:hover {
        transform: translateY(-8px) scale(1.05);
        border-color: var(--primary);
    }

    .box:hover .skill-img {
        transform: scale(1.1);
    }

    .box:hover .topic {
        background: var(--gradient1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .skill-boxes {
        gap: 2rem;
        padding: 0;
    }

    .skill-img {
        display: block;
        margin: 0 auto;
        padding: 1rem;
        width: 6rem;
        height: 6rem;
        object-fit: contain;
        position: relative;
        z-index: 3;
        user-select: none;
        -webkit-user-drag: none;
        transition: transform 0.4s ease;
        filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
    }

    .topic {
        text-align: center;
        font-weight: bold;
        margin: 0.6rem 0.6rem 1.4rem;
        position: relative;
        z-index: 3;
        width: 140px;
        color: var(--secondary);
        font-size: clamp(13px, 3.5vw, 17px);
    }

    .box.hide {
        display: none;
    }

    .box.show {
        display: flex;
    }

    .skill-card-ready {
        opacity: 0;
    }

    .skill-card-ready .skill-card-inner {
        transform: translateY(30px);
        opacity: 0;
    }

    @keyframes skillCardFadeIn {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    .skill-card-animated {
        animation: skillCardFadeIn 0.6s ease-out forwards;
    }

    @keyframes skillContentSlideUp {
        0% {
            opacity: 0;
            transform: translateY(30px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .skill-card-animated .skill-card-inner {
        animation: skillContentSlideUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    @media (max-width: 1024px) {
        .skills {
            padding-top: 5rem;
            padding-bottom: 5rem;
        }

        .text {
            margin-bottom: 1rem;
        }

        .skill-filter {
            margin: 1.5rem auto 2.5rem;
        }

        .skill-boxes {
            gap: 0.8rem;
            max-width: 90%;
        }

        .box {
            margin-bottom: -8px;
        }
    }

    @media (max-width: 768px) {
        .filter-btn {
            padding: 0.5rem 0.75rem;
            font-size: 11px;
        }

        .skill-boxes {
            gap: 1rem;
            max-width: 95%;
        }

        .box {
            margin-bottom: 0;
        }

        .skill-card-ready,
        .skill-card-animated,
        .skill-card-inner {
            animation: none !important;
            opacity: 1 !important;
            transform: none !important;
        }
    }

    @media (max-width: 640px) {
        .skill-img {
            padding: 0.5rem;
            width: 4rem;
            height: 4rem;
        }

        .topic {
            width: 100px;
            margin: 0.3rem 0.3rem 0.8rem;
            font-size: clamp(11px, 2.8vw, 14px);
        }
    }
</style>

<script>
    // Filter functionality
    const filterBtns = document.querySelectorAll('.filter-btn');
    const skillBoxes = document.querySelectorAll('.box');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const filter = btn.getAttribute('data-filter');

            // Update active button
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Filter skills
            skillBoxes.forEach(box => {
                const category = box.getAttribute('data-category');

                if (filter === 'all' || category === filter) {
                    box.classList.remove('hide');
                    box.classList.add('show');
                } else {
                    box.classList.remove('show');
                    box.classList.add('hide');
                }
            });
        });
    });

    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.15,
        rootMargin: '0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const skillCards = entry.target.querySelectorAll('.skill-card-ready');
                skillCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('skill-card-animated');
                        card.classList.remove('skill-card-ready');
                    }, index * 50);
                });
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    const skillsSection = document.querySelector('.skills');
    if (skillsSection) observer.observe(skillsSection);
</script>