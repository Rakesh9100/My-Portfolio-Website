---
import { Image } from "astro:assets";

import LPU from "../assets/images/education/LPU.jpg";
import DAV from "../assets/images/education/DAV.jpg";
import HCS from "../assets/images/education/HCS.jpg";

const educationData = [{
        degree: "B.Tech CSE",
        badge: {
            icon: "üéì",
            text: "Bachelor's Degree"
        },
        institution: "Lovely Professional University",
        period: "2020-24",
        description: "I did my Bachelor of Technology in Computer Science and Engineering from",
        highlight: "Lovely Professional University",
        score: "8.48 CGPA",
        image: LPU,
        link: "https://www.lpu.in/",
        achievements: [{
                icon: "üèÜ",
                text: "8.48 CGPA"
            },
            {
                icon: "üìö",
                text: "CSE Major"
            }
        ]
    },
    {
        degree: "Intermediate (12th)",
        badge: {
            icon: "üìñ",
            text: "Higher Secondary"
        },
        institution: "Dayanand Anglo Vedic Public School (CBSE)",
        period: "2018-20",
        description: "I did my Intermediate in Science stream from",
        highlight: "Dayanand Anglo Vedic Public School (CBSE)",
        score: "84%",
        image: DAV,
        link: "http://dav4bokaro.org/dav4_newsite/",
        achievements: [{
                icon: "üèÜ",
                text: "84% Score"
            },
            {
                icon: "üî¨",
                text: "Science Stream"
            }
        ]
    },
    {
        degree: "Matriculation (10th)",
        badge: {
            icon: "üìù",
            text: "Secondary School"
        },
        institution: "Holy Cross School",
        period: "2017-18",
        description: "I did my matriculation from",
        highlight: "Holy Cross School",
        score: "92%",
        image: HCS,
        link: "https://www.holycrossbokaro.com/",
        achievements: [{
                icon: "üèÜ",
                text: "92% Merit"
            },
            {
                icon: "‚≠ê",
                text: "CBSE Board"
            }
        ]
    }
];
---

<section class="education section-common section-bg-primary" id="education">
    <div class="title relative text-center font-bold mb-4 md:mb-6">
        <span class="section-title text-[8vw] sm:text-[6vw] md:text-[5vw] lg:text-[3.5vw] uppercase">My Education</span>
    </div>

    <div class="text text-center mb-8 md:mb-12 lg:mb-16 px-4">
        <span class="quote-text">Education is the most powerful weapon which we can use to change the world.</span>
    </div>

    <!-- Education Timeline -->
    <div class="education-timeline relative max-w-[1200px] mx-auto my-15 px-3 sm:px-5">
        <div class="timeline-line absolute left-4 sm:left-8 lg:left-1/2 top-0 bottom-0 w-1 lg:-translate-x-1/2" style="background: linear-gradient(180deg, transparent 0%, var(--primary) 15%, var(--primary) 85%, transparent 100%);"></div>

        <div class="education-boxes flex flex-col gap-8 lg:gap-15 relative">
            {educationData.map((edu, index) => (
            <div class={`box education-box ${index % 2 === 0 ? 'lg:mr-auto lg:ml-0 animate-slide-in-left' : 'lg:ml-auto lg:mr-0 animate-slide-in-right'}`} style="animation-delay: ${index * 0.2}s;">
                <div class="box-content flex flex-col lg:flex-row gap-4 sm:gap-5 lg:gap-6 p-4 sm:p-5 lg:p-6">
                    <div class="image-section w-full lg:flex-[0_0_200px] xl:flex-[0_0_280px] flex flex-col gap-3 sm:gap-4">
                        <div class="image relative rounded-[12px] sm:rounded-[15px] overflow-hidden flex-shrink-0">
                            <a href={edu.link} target="_blank" rel="noopener noreferrer" draggable="false" class="block relative cursor-pointer no-underline">
                                <Image src={edu.image} alt={edu.institution} width={300} height={200} loading="lazy" draggable="false" class="w-full h-[150px] sm:h-[180px] lg:h-[200px] object-cover block transition-all duration-400" />
                            </a>
                        </div>

                        <div class="achievements flex flex-row lg:flex-col gap-2 sm:gap-2.5 flex-wrap">
                            {edu.achievements.map((achievement) => (
                            <div class="achievement-item">
                                <span class="achievement-icon">{achievement.icon}</span>
                                <span>{achievement.text}</span>
                            </div>
                            ))}
                        </div>
                    </div>

                    <div class="content flex-1 flex flex-col gap-2 sm:gap-2.5 lg:gap-3 py-0 lg:py-2.5">
                        <div class="degree-badge">
                            <span class="badge-icon">{edu.badge.icon}</span>
                            <span class="badge-text">{edu.badge.text}</span>
                        </div>

                        <h3 class="font-bold m-0" style="font-size: clamp(18px, 4vw, 28px); background: var(--gradient1); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            {edu.degree}
                        </h3>

                        <h4 class="flex items-center gap-1.5 sm:gap-2 font-semibold m-0" style="font-size: clamp(13px, 3vw, 18px); background: var(--gradient2); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="14" height="14" class="flex-shrink-0 sm:w-4 sm:h-4" style="fill: var(--primary); opacity: 1;">
                                <path d="M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L64 64C28.7 64 0 92.7 0 128l0 16 0 48L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-256 0-48 0-16c0-35.3-28.7-64-64-64l-40 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L152 64l0-40zM48 192l352 0 0 256c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256z"/>
                            </svg>
                            {edu.period}
                        </h4>

                        <p class="m-0 leading-relaxed text-sm sm:text-base" style="font-size: clamp(13px, 2.5vw, 16px); color: rgba(255, 255, 255, 0.9);">
                            {edu.description} <span class="highlight-edu font-bold" style="background: var(--gradient3); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{edu.highlight}</span>{index === 0 ? ' with' : ', Bokaro and secured'} {index === 0 ? '' : 'the merit with '}<span class="cgpa font-black text-[1.1em]" style="background: var(--gradient1); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{edu.score}</span>{index === 0 ? '.' : '.'}
                        </p>
                    </div>
                </div>
            </div>
            ))}
        </div>
    </div>
</section>

<style>
    .education-box {
        position: relative;
        border-radius: 20px;
        margin-left: 0;
        overflow: hidden;
        width: calc(50% - 20px);
        border: 3px solid rgba(255, 255, 255, 0.15);
        transition: transform 0.35s ease, border-color 0.35s ease;
    }

    .education-box:hover {
        border-color: var(--primary);
    }

    .education-box:nth-child(odd) {
        margin-right: auto;
        margin-left: 0;
    }

    .education-box:nth-child(even) {
        margin-left: auto;
        margin-right: 0;
    }

    .timeline-line {
        left: 50% !important;
        transform: translateX(-50%);
    }

    .achievement-item {
        gap: 0.5rem;
        display: flex;
        color: white;
        align-items: center;
        border-radius: 10px;
        font-size: 0.8rem;
        font-weight: 600;
        padding: 0.5rem 0.7rem;
        background: var(--gradient3);
        border: 1px solid var(--secondary);
    }

    .achievement-icon {
        font-size: 1rem;
        flex-shrink: 0;
    }

    .degree-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.4rem 0.8rem;
        border-radius: 50px;
        width: fit-content;
        background: var(--gradient4);
    }

    .badge-icon {
        font-size: 1rem;
    }

    .badge-text {
        font-size: 0.625rem;
        font-weight: bold;
        color: white;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-50px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .animate-slide-in-left {
        animation: slideInLeft 0.8s ease-out forwards;
        animation-play-state: paused;
        opacity: 0;
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(50px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .animate-slide-in-right {
        animation: slideInRight 0.8s ease-out forwards;
        animation-play-state: paused;
        opacity: 0;
    }

    .animate-in-view {
        animation-play-state: running;
    }

    @media (max-width: 1024px) {
        .education {
            padding-top: 3rem;
            padding-bottom: 3rem;
        }

        .education-boxes {
            gap: 1.5rem;
        }

        .box-content {
            padding: 1rem;
        }

        .education-box {
            width: calc(100% - 3rem);
            margin-left: 3rem !important;
        }

        .timeline-line {
            left: 1rem !important;
        }
    }

    @media (max-width: 768px) {
        .education {
            padding-top: 4rem;
            padding-bottom: 4rem;
        }

        .education-boxes {
            gap: 2rem;
        }

        .timeline-line {
            left: 1rem !important;
        }

        .education-box {
            margin-left: 2rem !important;
        }
    }

    @media (max-width: 640px) {
        .education {
            padding: 3.5rem 0;
        }
    }
</style>

<script>
    // Initialize intersection observer for scroll animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in-view');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Observe animated elements
    const animatedElements = document.querySelectorAll('.animate-slide-in-left, .animate-slide-in-right');

    animatedElements.forEach(el => observer.observe(el));
</script>