---
import { Image } from "astro:assets";
import homeImg from "../assets/images/home.png";
---

<div class="home-wrapper min-h-screen flex flex-col overflow-hidden relative">
    <!-- Animated Gradient Background -->
    <div class="absolute inset-0 z-[1] hero-bg"></div>
    <section class="home flex-1 flex items-center justify-center text-white relative z-[2]" id="home">
        <div class="max-width w-full flex flex-col lg:flex-row items-center justify-between relative z-10 px-4 sm:px-6 md:px-10 lg:px-20 py-8 lg:py-12 min-h-[calc(100vh-120px)] lg:min-h-0">
            <div class="home-text w-full lg:max-w-[600px] min-h-[250px] lg:min-h-[300px] text-center lg:text-left">
                <div class="text-1 font-bold mb-2 tracking-wide opacity-0 translate-x-[-50px] text-[36px] lg:text-[40px]" style="background: var(--gradient3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px var(--primary));">
                    Hello,
                </div>

                <div class="text-2 font-normal mb-3 tracking-wide text-white opacity-0 translate-x-[-50px]" style="font-size: clamp(18px, 4vw, 32px);">
                    My name is <span class="name-underline font-bold relative inline-block" style="background: var(--gradient1); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Rakesh Roshan</span>
                </div>

                <div class="text-3 font-semibold tracking-wide my-4 text-white opacity-0 translate-x-[-50px]" style="font-size: clamp(16px, 3.5vw, 28px); min-height: 50px;">
                    I am <span id="typing-text" class="typing font-bold" style="background: var(--gradient2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: inline-block;"></span>
                </div>

                <div class="home-buttons flex gap-3 sm:gap-4 lg:gap-5 flex-wrap opacity-0 translate-x-[-50px] justify-center lg:justify-start">
                    <a href="/assets/Rakesh_Roshan_Resume.pdf" target="_blank" rel="noopener noreferrer" draggable="false" aria-label="Open resume in new tab">
                        <button class="hero-btn hero-btn-primary px-4 sm:px-6 lg:px-7 py-2.5 sm:py-3 font-semibold text-white rounded-full transition-colors duration-300 relative flex items-center gap-2 sm:gap-2.5" style="font-size: clamp(12px, 3vw, 16px); letter-spacing: 0.5px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="16" height="16" fill="currentColor" class="sm:w-[18px] sm:h-[18px]">
                                <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-92.7-69.4z"/>
                            </svg>
                            <span class="hidden sm:inline">VIEW RESUME</span>
                            <span class="sm:hidden">RESUME</span>
                        </button>
                    </a>
                    <a href="#contact" draggable="false" aria-label="Go to contact page">
                        <button class="hero-btn hero-btn-secondary px-4 sm:px-6 lg:px-7 py-2.5 sm:py-3 font-semibold text-white rounded-full transition-colors duration-300 relative flex items-center gap-2 sm:gap-2.5" style="font-size: clamp(12px, 3vw, 16px); letter-spacing: 0.5px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="16" height="16" fill="currentColor" class="sm:w-[18px] sm:h-[18px]">
                                <path d="M64 112c-8.8 0-16 7.2-16 16l0 22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1l0-22.1c0-8.8-7.2-16-16-16L64 112zM48 212.2L48 384c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-171.8L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128z"/>
                            </svg>
                            CONTACT ME
                        </button>
                    </a>
                </div>
            </div>

            <div class="home-image mt-8 lg:mt-5 lg:ml-5 relative w-full lg:w-auto flex justify-center lg:justify-end" style="max-width: clamp(200px, 80vw, 450px);">
                <div class="image-container relative w-full hero-image-wrapper">
                    <Image src={homeImg} alt="Home Image" width={450} height={460} loading="eager" fetchpriority="high" draggable="false" class="hero-image w-full h-auto"/>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="scroll-indicator absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2.5 z-[3] opacity-0">
            <div class="mouse w-7 h-11 border-2 border-white/50 rounded-[20px] relative bg-white/5">
                <div class="wheel w-1 h-2.5 rounded-sm absolute top-2 animate-scroll-wheel" style="background: var(--primary); left: 50%; margin-left: -2px;"></div>
            </div>
            <span class="scroll-text text-xs text-white/70 tracking-[0.2em] uppercase font-bold animate-text-pulse">SCROLL DOWN</span>
        </div>
    </section>
</div>

<style>
    .hero-bg {
        background: radial-gradient(800px 400px at 10% 20%, rgba(217, 70, 239, 0.15), transparent 60%),radial-gradient(700px 350px at 90% 30%, rgba(59, 130, 246, 0.15), transparent 60%), linear-gradient(135deg, #0b0f1a 0%, #0f172a 50%, #020617 100%);
    }

    @keyframes scroll-wheel {
        0% {
            transform: translateY(0px);
            opacity: 1;
        }

        50% {
            transform: translateY(12px);
            opacity: 0.5;
        }

        100% {
            transform: translateY(0px);
            opacity: 1;
        }
    }

    .animate-scroll-wheel {
        animation: scroll-wheel 2s ease-in-out infinite;
    }

    @keyframes textPulse {
        0%,
        100% {
            transform: scale(1);
            opacity: 0.7;
        }

        50% {
            transform: scale(1.05);
            opacity: 1;
        }
    }

    .animate-text-pulse {
        animation: textPulse 2s ease-in-out infinite;
    }

    @keyframes slideInLeft {
        from {
            transform: translateX(-50px);
        }

        to {
            transform: translateX(0);
        }
    }

    .home .text-1,
    .home .text-2,
    .home .text-3,
    .home .home-buttons {
        animation: slideInLeft ease forwards;
        opacity: 1;
    }

    .home .text-1 {
        animation-duration: 0.6s;
        animation-delay: 0.1s;
    }

    .home .text-2 {
        animation-duration: 0.8s;
        animation-delay: 0.2s;
    }

    .home .text-3 {
        animation-duration: 1s;
        animation-delay: 0.3s;
    }

    .home .home-buttons {
        animation-duration: 1s;
        animation-delay: 0.4s;
    }

    .hero-btn {
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease, background 0.3s ease;
        background: linear-gradient(#0b0f1a, #0b0f1a) padding-box, var(--navbar) border-box;
    }

    .hero-btn-primary::before,
    .hero-btn-secondary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        z-index: -1;
        border-radius: inherit;
        transition: left 0.5s ease;
    }

    .hero-btn-primary::before {
        background: var(--gradient2);
    }

    .hero-btn-secondary::before {
        background: var(--gradient1);
    }

    .hero-btn-primary:hover::before,
    .hero-btn-secondary:hover::before {
        left: 0;
    }

    .hero-btn-primary:hover,
    .hero-btn-secondary:hover {
        transform: translateY(-3px) scale(1.05);
        background: linear-gradient(#0b0f1a, #0b0f1a) padding-box, var(--gradient1) border-box;
    }

    @keyframes underlineGrow {
        from {
            width: 0;
        }

        to {
            width: 100%;
        }
    }

    .name-underline::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -5px;
        width: 0;
        height: 3px;
        background: var(--gradient1);
        transition: width 0.8s ease;
        animation: underlineGrow 1s ease forwards 1s;
    }

    .typing {
        position: relative;
    }

    :global(.typed-cursor) {
        color: var(--primary) !important;
        font-weight: bold;
        animation: blink 0.7s infinite;
        margin-left: 2px;
    }

    @keyframes blink {
        0%,
        49% {
            opacity: 1;
        }

        50%,
        100% {
            opacity: 0;
        }
    }

    @keyframes heroFloat {
        0% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-14px);
        }
        100% {
            transform: translateY(0);
        }
    }

    .hero-image {
        animation: heroFloat 6s ease-in-out infinite;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateX(-50%) translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
    }

    .scroll-indicator {
        animation: fadeInUp 1s ease forwards 0.5s;
    }

    @media (max-width: 1024px) {
        .home-wrapper {
            min-height: 100vh;
        }

        .home {
            padding-top: 70px;
            padding-bottom: 30px;
        }

        .max-width {
            min-height: calc(100vh - 100px);
            justify-content: center;
        }

        .home-text {
            margin-bottom: 2rem;
            min-height: 150px;
        }

        .text-1 {
            margin-bottom: 0.5rem;
        }

        .text-2 {
            margin-bottom: 1rem;
        }

        .home-image {
            margin-top: 1rem;
            max-width: clamp(140px, 50vw, 300px) !important;
        }

        .scroll-indicator {
            display: none;
        }
    }

    @media (max-width: 768px) {
        .text-3 {
            min-height: 40px;
        }

        .home-image {
            max-width: clamp(180px, 70vw, 400px) !important;
        }
    }

    @media (max-width: 640px) {
        .home-image {
            margin-top: 1rem;
            max-width: clamp(160px, 65vw, 350px) !important;
        }
    }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" defer></script>
<script>
    // Type declaration for Typed.js
    declare var Typed: any;

    // Typed.js initialization with single initialization point
    function initTyped() {
        if (typeof Typed !== 'undefined') {
            const typingElement = document.getElementById('typing-text');
            if (typingElement && !typingElement.classList.contains('typed-initialized')) {
                typingElement.classList.add('typed-initialized');
                new Typed('#typing-text', {
                    strings: ['A DevOps Engineer', 'A Cloud Enthusiast', 'An Open Source Contributor', 'into Software Engineering'],
                    typeSpeed: 100,
                    backSpeed: 60,
                    backDelay: 1500,
                    startDelay: 500,
                    loop: true,
                    showCursor: true,
                    cursorChar: '|',
                    autoInsertCss: true
                });
            }
        } else {
            // Retry if Typed is not loaded yet
            setTimeout(initTyped, 100);
        }
    }

    // Single initialization point
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initTyped);
    } else {
        initTyped();
    }
</script>